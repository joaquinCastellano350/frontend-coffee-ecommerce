    <header class="topbar">
      <a routerLink="/" class="logo"><mat-icon>local_cafe</mat-icon> Coffee E-Commerce</a>

      <span class="spacer"></span>

      <ng-container *ngIf="!auth.loading(); else loading">
        <ng-container *ngIf="auth.user(); else guest">
          
          <button mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>account_circle</mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <button mat-menu-item disabled> {{ auth.user()!.email }} </button>
            <mat-divider></mat-divider>

            <ng-container *ngIf="auth.isAdmin(); else normalUser">
              <button mat-menu-item routerLink="/admin/products">
                <mat-icon>dashboard</mat-icon>
                <span>Gestionar Productos</span>
              </button>
              <button mat-menu-item routerLink="/admin/forms">
                <mat-icon>assignment</mat-icon>
                <span>Consultas de Usuarios</span>
              </button>
            </ng-container>

            <ng-template #normalUser>
              <button mat-menu-item routerLink="/wishlist">
                <mat-icon>favorite</mat-icon>
                <span>Lista de deseos</span>
              </button>
            </ng-template>

            <button mat-menu-item (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Cerrar sesión</span>
            </button>
          </mat-menu>
        </ng-container>

        <ng-template #guest>
          <a mat-button routerLink="/login">Iniciar sesión</a>
          <a mat-button routerLink="/register">Registrarse</a>
        </ng-template>
      </ng-container>

      <ng-template #loading> Cargando… </ng-template>
    </header>

    <router-outlet />